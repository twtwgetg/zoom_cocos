# 暂停界面音乐控制说明

## 功能描述
当玩家打开暂停界面时，背景音乐会自动暂停播放；当玩家关闭暂停界面（继续游戏）时，背景音乐会自动恢复播放。

## 实现原理

### 核心逻辑
1. 在暂停界面显示时记录当前背景音乐的播放状态
2. 暂停背景音乐播放
3. 在暂停界面隐藏时根据之前记录的状态决定是否恢复播放

### 代码实现

#### frm_pause.ts
- 添加了[wasMusicPlaying](file:///c:/Users/Administrator/zoom_cocos/client/main/assets/script/frm_pause.ts#L27-L27)变量用于记录暂停前的音乐状态
- 重写了[show()](file:///c:/Users/Administrator/zoom_cocos/client/main/assets/script/frmbase.ts#L31-L35)方法，在显示暂停界面时暂停背景音乐
- 重写了[hide()](file:///c:/Users/Administrator/zoom_cocos/client/main/assets/script/frmbase.ts#L37-L40)方法，在隐藏暂停界面时恢复背景音乐

#### musicmgr.ts
- 添加了静态实例引用[instance](file:///c:/Users/Administrator/zoom_cocos/client/main/assets/script/musicmgr.ts#L7-L7)，便于其他类访问音乐管理器实例

## 技术细节

### 状态管理
- 使用[wasMusicPlaying](file:///c:/Users/Administrator/zoom_cocos/client/main/assets/script/frm_pause.ts#L27-L27)变量记录暂停前音乐是否正在播放
- 只有在暂停前音乐正在播放且音乐功能启用时，才会在恢复时重新播放

### 事件处理
- 通过重写[show()](file:///c:/Users/Administrator/zoom_cocos/client/main/assets/script/frmbase.ts#L31-L35)和[hide()](file:///c:/Users/Administrator/zoom_cocos/client/main/assets/script/frmbase.ts#L37-L40)方法实现音乐控制逻辑
- 保持了原有的事件处理机制不变

## 用户体验
这个功能提升了游戏的用户体验：
- 玩家在暂停时不会被背景音乐打扰
- 继续游戏时音乐会自然恢复，无需手动操作
- 遵循了玩家对暂停功能的常规预期