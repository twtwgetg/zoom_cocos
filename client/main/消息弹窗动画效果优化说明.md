# 消息弹窗动画效果优化说明

## 需求说明
消息弹出后先停留1秒，让玩家能够看清楚消息内容，然后再向上移动并淡出。

## 实现方案
修改frm_msg.ts中的event_msg_top事件处理函数，使用tween的delay和then方法来实现分阶段动画效果。

## 代码实现
```typescript
// 先停留1秒，保持完全不透明
tween(xt)
    .delay(1) // 停留1秒
    .then(
        tween().parallel(
            // 位置动画：从下往上移动
            tween().to(1, { position: endPos }),
            // 透明度动画：淡出效果
            tween().to(1, {}, {
                onUpdate: (target, ratio) => {
                    if (label) {
                        // 根据ratio计算透明度，从255到0
                        const alpha = 255 * (1 - ratio);
                        label.color = new Color(label.color.r, label.color.g, label.color.b, Math.floor(alpha));
                    }
                }
            })
        )
    )
    .call(() => {
        xt.destroy();
    })
    .start();
```

## 动画流程
1. 消息从屏幕底部(-100)出现
2. 在当前位置停留1秒钟，保持完全不透明
3. 1秒后开始向上移动到顶部(100)
4. 同时逐渐淡出(透明度从255变为0)
5. 动画结束后自动销毁节点

## 参数说明
- `delay(1)`：延迟1秒执行后续动画
- `then()`：在延迟结束后执行指定的动画序列
- `parallel()`：同时执行多个动画
- `to(1, { position: endPos })`：1秒内将位置从当前位置移动到endPos
- `onUpdate`：每帧更新回调函数，用于手动控制透明度

## 测试方法
1. 触发event_msg_top事件：
```typescript
Main.DispEvent("event_msg_top", {msg: "测试消息"});
```
2. 观察消息是否：
   - 立即出现在屏幕底部
   - 停留1秒钟保持清晰可见
   - 然后向上移动并逐渐淡出
   - 动画结束后消失